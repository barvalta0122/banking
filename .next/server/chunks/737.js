!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="76e4567b-599f-4f6b-88ce-46fe345489f5",e._sentryDebugIdIdentifier="sentry-dbid-76e4567b-599f-4f6b-88ce-46fe345489f5")}catch(e){}}(),function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="76e4567b-599f-4f6b-88ce-46fe345489f5",e._sentryDebugIdIdentifier="sentry-dbid-76e4567b-599f-4f6b-88ce-46fe345489f5")}catch(e){}}(),exports.id=737,exports.ids=[737],exports.modules={98471:(e,a,r)=>{"use strict";let t;r.r(a),r.d(a,{default:()=>m,generateImageMetadata:()=>b,generateMetadata:()=>l,generateViewport:()=>u});var n=r(53935),c=r(53873),s=r(99993),d=r(54580),i=r(70396),o=r(19183);let f=new Proxy(function({children:e}){return(0,i.jsxs)("main",{className:"flex min-h-screen w-full justify-between font-inter",children:[e,(0,i.jsx)("div",{className:"auth-asset",children:(0,i.jsx)("div",{children:(0,i.jsx)(o.default,{src:"/icons/auth-image.svg",alt:"Auth image",width:500,height:500,className:"rounded-l-xl object-contain"})})})]})},{apply:(e,a,r)=>{let t,i,o;try{let e=d.requestAsyncStorage.getStore();t=(0,n.h)((0,c.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("sentry-trace")]),()=>void 0),i=(0,n.h)((0,c.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("baggage")]),()=>void 0),o=(0,c.x)([e,"optionalAccess",e=>e.headers])}catch(e){}return s.wrapServerComponentWithSentry(e,{componentRoute:"/(auth)",componentType:"Layout",sentryTraceHeader:t,baggageHeader:i,headers:o}).apply(a,r)}});t="function"==typeof f?new Proxy(f,{apply:(e,a,r)=>{let t,i,o;try{let e=d.requestAsyncStorage.getStore();t=(0,n.h)((0,c.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("sentry-trace")]),()=>void 0),i=(0,n.h)((0,c.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("baggage")]),()=>void 0),o=(0,c.x)([e,"optionalAccess",e=>e.headers])}catch(e){}return s.wrapServerComponentWithSentry(e,{componentRoute:"/(auth)",componentType:"Layout",sentryTraceHeader:t,baggageHeader:i,headers:o}).apply(a,r)}}):f;let l=void 0,b=void 0,u=void 0,m=t},34559:(e,a,r)=>{let t={"0308aa41fc4e5d2a58369d21142f3b63ff993d17":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.signUp),"1133cc6f7634c12d927f0cea48eaffb138702c8f":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.createLinkToken),"13c00a0b1477620cd0b600fb678f92c79e38df72":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.logoutAccount),"245fe680eac8af592acc28f21e477a0fb9b0f54a":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.$$ACTION_7),"306716ad50dd0118becbceab3218a05e2af24f14":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.createBankAccount),"481de2e958a1f0989fb9a82942f3922dcbad956f":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.getUserInfo),"4f5d027f817f05db07a04875cb8ab1775676df9c":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.$$ACTION_0),"57b0c5e1e47e76edc82f391a87d0cb08bd61c04d":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.$$ACTION_2),"6fb863147636cb4841113352dfcd6fa784497070":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.exchangePublicToken),"82bc44f606e186ac06e9c9fc59441505db243f16":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.$$ACTION_9),"82deb28abdff72f88801084f9a392ccdffc8cd69":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.getBanks),"8568a67795cefec8dcbfbf376c0ccba5263386d4":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.signIn),"9249bd9d6d93b168023e51461ad7e71a771f76cf":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.$$ACTION_5),"98985eb42435b1e5c06bf49c590eeeae05205eb4":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.getLoggedInUser),"9ddfa2e74e9265d0ea56505639bd022cc6e747ea":()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.$$ACTION_1),aadc44d3e228f191ba97dea4b94bfd3d6c422a1f:()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.$$ACTION_4),b461f71c8b09816409fe99c5b1181e7f53a0c0c3:()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.getBankByAccountId),cb01dd2af31899c61ba851a1866163ff36df11eb:()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.$$ACTION_8),d101fc5b854eda02abff8994c23b64459ff9c580:()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.$$ACTION_3),d26287b35055b111e84fe0f7485a71fbaf215d83:()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.getBank),ef14e1f65efe4ac56ce236b9a3387533d746bfa6:()=>Promise.resolve().then(r.bind(r,84425)).then(e=>e.$$ACTION_6)};async function n(e,...a){return(await t[e]()).apply(null,a)}e.exports={"0308aa41fc4e5d2a58369d21142f3b63ff993d17":n.bind(null,"0308aa41fc4e5d2a58369d21142f3b63ff993d17"),"1133cc6f7634c12d927f0cea48eaffb138702c8f":n.bind(null,"1133cc6f7634c12d927f0cea48eaffb138702c8f"),"13c00a0b1477620cd0b600fb678f92c79e38df72":n.bind(null,"13c00a0b1477620cd0b600fb678f92c79e38df72"),"245fe680eac8af592acc28f21e477a0fb9b0f54a":n.bind(null,"245fe680eac8af592acc28f21e477a0fb9b0f54a"),"306716ad50dd0118becbceab3218a05e2af24f14":n.bind(null,"306716ad50dd0118becbceab3218a05e2af24f14"),"481de2e958a1f0989fb9a82942f3922dcbad956f":n.bind(null,"481de2e958a1f0989fb9a82942f3922dcbad956f"),"4f5d027f817f05db07a04875cb8ab1775676df9c":n.bind(null,"4f5d027f817f05db07a04875cb8ab1775676df9c"),"57b0c5e1e47e76edc82f391a87d0cb08bd61c04d":n.bind(null,"57b0c5e1e47e76edc82f391a87d0cb08bd61c04d"),"6fb863147636cb4841113352dfcd6fa784497070":n.bind(null,"6fb863147636cb4841113352dfcd6fa784497070"),"82bc44f606e186ac06e9c9fc59441505db243f16":n.bind(null,"82bc44f606e186ac06e9c9fc59441505db243f16"),"82deb28abdff72f88801084f9a392ccdffc8cd69":n.bind(null,"82deb28abdff72f88801084f9a392ccdffc8cd69"),"8568a67795cefec8dcbfbf376c0ccba5263386d4":n.bind(null,"8568a67795cefec8dcbfbf376c0ccba5263386d4"),"9249bd9d6d93b168023e51461ad7e71a771f76cf":n.bind(null,"9249bd9d6d93b168023e51461ad7e71a771f76cf"),"98985eb42435b1e5c06bf49c590eeeae05205eb4":n.bind(null,"98985eb42435b1e5c06bf49c590eeeae05205eb4"),"9ddfa2e74e9265d0ea56505639bd022cc6e747ea":n.bind(null,"9ddfa2e74e9265d0ea56505639bd022cc6e747ea"),aadc44d3e228f191ba97dea4b94bfd3d6c422a1f:n.bind(null,"aadc44d3e228f191ba97dea4b94bfd3d6c422a1f"),b461f71c8b09816409fe99c5b1181e7f53a0c0c3:n.bind(null,"b461f71c8b09816409fe99c5b1181e7f53a0c0c3"),cb01dd2af31899c61ba851a1866163ff36df11eb:n.bind(null,"cb01dd2af31899c61ba851a1866163ff36df11eb"),d101fc5b854eda02abff8994c23b64459ff9c580:n.bind(null,"d101fc5b854eda02abff8994c23b64459ff9c580"),d26287b35055b111e84fe0f7485a71fbaf215d83:n.bind(null,"d26287b35055b111e84fe0f7485a71fbaf215d83"),ef14e1f65efe4ac56ce236b9a3387533d746bfa6:n.bind(null,"ef14e1f65efe4ac56ce236b9a3387533d746bfa6")}},19264:(e,a,r)=>{Promise.resolve().then(r.bind(r,23990))},94905:(e,a,r)=>{Promise.resolve().then(r.t.bind(r,90736,23))},23990:(e,a,r)=>{"use strict";r.d(a,{default:()=>y});var t=r(32556),n=r(13035),c=r(81719),s=r(32228),d=r(30533),i=r(24373),o=r(25609),f=r(31418),l=r(99675),b=r(57094);(0,b.RL)("sign-up");let u=({control:e,name:a,label:r,placeholder:n})=>t.jsx(f.Wi,{control:e,name:a,render:({field:e})=>(0,t.jsxs)("div",{className:"form-item",children:[t.jsx(f.lX,{className:"form-label",children:r}),(0,t.jsxs)("div",{className:"flex w-full flex-col",children:[t.jsx(f.NI,{children:t.jsx(l.I,{placeholder:n,className:"input-class",type:"password"===a?"password":"text",...e})}),t.jsx(f.zG,{className:"form-message mt-2"})]})]})});var m=r(25357),g=r(37513),p=r(58145),h=r(65051);let y=({type:e})=>{let a=(0,g.useRouter)(),[r,l]=(0,s.useState)(null),[y,x]=(0,s.useState)(!1),v=(0,b.RL)(e),w=(0,i.cI)({resolver:(0,d.F)(v),defaultValues:{email:"",password:""}}),S=async r=>{x(!0);try{if("sign-up"===e){let e={firstName:r.firstName,lastName:r.lastName,address1:r.address1,city:r.city,state:r.state,postalCode:r.postalCode,dateOfBirth:r.dateOfBirth,ssn:r.ssn,email:r.email,password:r.password},a=await (0,p.y1)(e);l(a)}"sign-in"===e&&await (0,p.zB)({email:r.email,password:r.password})&&a.push("/")}catch(e){console.log(e)}finally{x(!1)}};return(0,t.jsxs)("section",{className:"auth-form",children:[(0,t.jsxs)("header",{className:"flex flex-col gap-5 md:gap-8",children:[(0,t.jsxs)(c.default,{href:"/",className:"cursor-pointer flex items-center gap-1",children:[t.jsx(n.default,{src:"/icons/logo.svg",width:34,height:34,alt:"Horizon logo"}),t.jsx("h1",{className:"text-26 font-ibm-plex-serif font-bold text-black-1",children:"Horizon"})]}),t.jsx("div",{className:"flex flex-col gap-1 md:gap-3",children:(0,t.jsxs)("h1",{className:"text-24 lg:text-36 font-semibold text-gray-900",children:[r?"Link Account":"sign-in"===e?"Sign In":"Sign Up",t.jsx("p",{className:"text-16 font-normal text-gray-600",children:r?"Link your account to get started":"Please enter your details"})]})})]}),r?t.jsx("div",{className:"flex flex-col gap-4",children:t.jsx(h.Z,{user:r,variant:"primary"})}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(f.l0,{...w,children:(0,t.jsxs)("form",{onSubmit:w.handleSubmit(S),className:"space-y-8",children:["sign-up"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[t.jsx(u,{control:w.control,name:"firstName",label:"First Name",placeholder:"Enter your first name"}),t.jsx(u,{control:w.control,name:"lastName",label:"Last Name",placeholder:"Enter your first name"})]}),t.jsx(u,{control:w.control,name:"address1",label:"Address",placeholder:"Enter your specific address"}),t.jsx(u,{control:w.control,name:"city",label:"City",placeholder:"Enter your city"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[t.jsx(u,{control:w.control,name:"state",label:"State",placeholder:"Example: NY"}),t.jsx(u,{control:w.control,name:"postalCode",label:"Postal Code",placeholder:"Example: 11101"})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[t.jsx(u,{control:w.control,name:"dateOfBirth",label:"Date of Birth",placeholder:"YYYY-MM-DD"}),t.jsx(u,{control:w.control,name:"ssn",label:"SSN",placeholder:"Example: 1234"})]})]}),t.jsx(u,{control:w.control,name:"email",label:"Email",placeholder:"Enter your email"}),t.jsx(u,{control:w.control,name:"password",label:"Password",placeholder:"Enter your password"}),t.jsx("div",{className:"flex flex-col gap-4",children:t.jsx(o.z,{type:"submit",disabled:y,className:"form-btn",children:y?(0,t.jsxs)(t.Fragment,{children:[t.jsx(m.Z,{size:20,className:"animate-spin"})," \xa0 Loading..."]}):"sign-in"===e?"Sign In":"Sign Up"})})]})}),(0,t.jsxs)("footer",{className:"flex justify-center gap-1",children:[t.jsx("p",{className:"text-14 font-normal text-gray-600",children:"sign-in"===e?"Don't have an account?":"Already have an account?"}),t.jsx(c.default,{href:"sign-in"===e?"/sign-up":"/sign-in",className:"form-link",children:"sign-in"===e?"Sign up":"Sign in"})]})]})]})}},31418:(e,a,r)=>{"use strict";r.d(a,{l0:()=>l,NI:()=>y,pf:()=>x,Wi:()=>u,xJ:()=>p,lX:()=>h,zG:()=>v});var t=r(32556),n=r(32228),c=r(96610),s=r(24373),d=r(57094),i=r(72668);let o=(0,r(41521).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),f=n.forwardRef(({className:e,...a},r)=>t.jsx(i.f,{ref:r,className:(0,d.cn)(o(),e),...a}));f.displayName=i.f.displayName;let l=s.RV,b=n.createContext({}),u=({...e})=>t.jsx(b.Provider,{value:{name:e.name},children:t.jsx(s.Qr,{...e})}),m=()=>{let e=n.useContext(b),a=n.useContext(g),{getFieldState:r,formState:t}=(0,s.Gc)(),c=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:d}=a;return{id:d,name:e.name,formItemId:`${d}-form-item`,formDescriptionId:`${d}-form-item-description`,formMessageId:`${d}-form-item-message`,...c}},g=n.createContext({}),p=n.forwardRef(({className:e,...a},r)=>{let c=n.useId();return t.jsx(g.Provider,{value:{id:c},children:t.jsx("div",{ref:r,className:(0,d.cn)("space-y-2",e),...a})})});p.displayName="FormItem";let h=n.forwardRef(({className:e,...a},r)=>{let{error:n,formItemId:c}=m();return t.jsx(f,{ref:r,className:(0,d.cn)(n&&"text-destructive",e),htmlFor:c,...a})});h.displayName="FormLabel";let y=n.forwardRef(({...e},a)=>{let{error:r,formItemId:n,formDescriptionId:s,formMessageId:d}=m();return t.jsx(c.g7,{ref:a,id:n,"aria-describedby":r?`${s} ${d}`:`${s}`,"aria-invalid":!!r,...e})});y.displayName="FormControl";let x=n.forwardRef(({className:e,...a},r)=>{let{formDescriptionId:n}=m();return t.jsx("p",{ref:r,id:n,className:(0,d.cn)("text-sm text-muted-foreground",e),...a})});x.displayName="FormDescription";let v=n.forwardRef(({className:e,children:a,...r},n)=>{let{error:c,formMessageId:s}=m(),i=c?String(c?.message):a;return i?t.jsx("p",{ref:n,id:s,className:(0,d.cn)("text-sm font-medium text-destructive",e),...r,children:i}):null});v.displayName="FormMessage"},99675:(e,a,r)=>{"use strict";r.d(a,{I:()=>s});var t=r(32556),n=r(32228),c=r(57094);let s=n.forwardRef(({className:e,type:a,...r},n)=>t.jsx("input",{type:a,className:(0,c.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));s.displayName="Input"},75012:(e,a,r)=>{"use strict";r.d(a,{ZP:()=>d});var t=r(41716);let n=(0,t.createProxy)(String.raw`/Users/prathambarvalta/Desktop/horizon/components/AuthForm.tsx`),{__esModule:c,$$typeof:s}=n;n.default;let d=(0,t.createProxy)(String.raw`/Users/prathambarvalta/Desktop/horizon/components/AuthForm.tsx#default`)},58938:(e,a,r)=>{"use strict";r.d(a,{addFundingSource:()=>g,createDwollaCustomer:()=>l});var t=r(27763);r(15740);var n=r(10985),c=r(35203);let s=new n.Client({environment:(()=>{switch(process.env.DWOLLA_ENV){case"sandbox":return"sandbox";case"production":return"production";default:throw Error("Dwolla environment should either be set to `sandbox` or `production`")}})(),key:process.env.DWOLLA_KEY,secret:process.env.DWOLLA_SECRET}),d=(0,t.registerServerReference)("338f1a3cf48748ba682ef2675c8379a766375770",i);async function i(e){try{return await s.post(`customers/${e.customerId}/funding-sources`,{name:e.fundingSourceName,plaidToken:e.plaidToken}).then(e=>e.headers.get("location"))}catch(e){console.error("Creating a Funding Source Failed: ",e)}}let o=(0,t.registerServerReference)("d2781a7233d5d5fff9aa2e01dcd97e3ddfd6eddf",f);async function f(){try{return(await s.post("on-demand-authorizations")).body._links}catch(e){console.error("Creating an On Demand Authorization Failed: ",e)}}let l=(0,t.registerServerReference)("29f739281f571a7c7c8b6c0c5e5fa3be42617c51",b);async function b(e){try{return await s.post("customers",e).then(e=>e.headers.get("location"))}catch(e){console.error("Creating a Dwolla Customer Failed: ",e)}}let u=(0,t.registerServerReference)("84cc59f40410d8b2ac5a06b6d65eeef6fc798900",m);async function m({sourceFundingSourceUrl:e,destinationFundingSourceUrl:a,amount:r}){try{return await s.post("transfers",{_links:{source:{href:e},destination:{href:a}},amount:{currency:"USD",value:r}}).then(e=>e.headers.get("location"))}catch(e){console.error("Transfer fund failed: ",e)}}let g=(0,t.registerServerReference)("c6b4b50174c94d9896f6139cc0b06a33bacd7bbc",p);async function p({dwollaCustomerId:e,processorToken:a,bankName:r}){try{let t=await o();return await d({customerId:e,fundingSourceName:r,plaidToken:a,_links:t})}catch(e){console.error("Transfer fund failed: ",e)}}(0,c.ensureServerEntryExports)([d,o,l,u,g]),(0,t.registerServerReference)("896affa7fc3a6e9736e267ebb5b4d0bdb8a95b18",d),(0,t.registerServerReference)("135e2d316bc265e40f1f10d2e2087899fadfe431",o),(0,t.registerServerReference)("55bf13da9f8237ccd9b677b85c477ea220a968ab",l),(0,t.registerServerReference)("055c3513479256c98f4ddcad5bd84d6d340fbf06",u),(0,t.registerServerReference)("2fe4a308114474ceda2d38b5dee26f52db419b17",g)},84425:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$ACTION_0:()=>p,$$ACTION_1:()=>y,$$ACTION_2:()=>v,$$ACTION_3:()=>I,$$ACTION_4:()=>C,$$ACTION_5:()=>_,$$ACTION_6:()=>P,$$ACTION_7:()=>E,$$ACTION_8:()=>k,$$ACTION_9:()=>D,createBankAccount:()=>A,createLinkToken:()=>N,exchangePublicToken:()=>j,getBank:()=>R,getBankByAccountId:()=>T,getBanks:()=>$,getLoggedInUser:()=>w,getUserInfo:()=>g,logoutAccount:()=>S,signIn:()=>h,signUp:()=>x});var t=r(27763);r(15740);var n=r(68341),c=r(59422),s=r(20730),d=r(5308),i=r(16905),o=r(57389),f=r(58938),l=r(35203);let{APPWRITE_DATABASE_ID:b,APPWRITE_USER_COLLECTION_ID:u,APPWRITE_BANK_COLLECTION_ID:m}=process.env,g=(0,t.registerServerReference)("4f5d027f817f05db07a04875cb8ab1775676df9c",p);async function p({userId:e}){try{let{database:a}=await (0,c.createAdminClient)(),r=await a.listDocuments(b,u,[n.Query.equal("userId",[e])]);return(0,d.parseStringify)(r.documents[0])}catch(e){console.log(e)}}let h=(0,t.registerServerReference)("9ddfa2e74e9265d0ea56505639bd022cc6e747ea",y);async function y({email:e,password:a}){try{let{account:r}=await (0,c.createAdminClient)(),t=await r.createEmailPasswordSession(e,a);(0,s.cookies)().set("appwrite-session",t.secret,{path:"/",httpOnly:!0,sameSite:"strict",secure:!0});let n=await g({userId:t.userId});return(0,d.parseStringify)(n)}catch(e){console.error("Error",e)}}let x=(0,t.registerServerReference)("57b0c5e1e47e76edc82f391a87d0cb08bd61c04d",v);async function v({password:e,...a}){let r;let{email:t,firstName:i,lastName:o}=a;try{let{account:l,database:m}=await (0,c.createAdminClient)();if(!(r=await l.create(n.ID.unique(),t,e,`${i} ${o}`)))throw Error("Error creating user");let g=await (0,f.createDwollaCustomer)({...a,type:"personal"});if(!g)throw Error("Error creating Dwolla customer");let p=(0,d.extractCustomerIdFromUrl)(g),h=await m.createDocument(b,u,n.ID.unique(),{...a,userId:r.$id,dwollaCustomerId:p,dwollaCustomerUrl:g}),y=await l.createEmailPasswordSession(t,e);return(0,s.cookies)().set("appwrite-session",y.secret,{path:"/",httpOnly:!0,sameSite:"strict",secure:!0}),(0,d.parseStringify)(h)}catch(e){console.error("Error",e)}}async function w(){try{let{account:e}=await (0,c.createSessionClient)(),a=await e.get(),r=await g({userId:a.$id});return(0,d.parseStringify)(r)}catch(e){return console.log(e),null}}let S=(0,t.registerServerReference)("d101fc5b854eda02abff8994c23b64459ff9c580",I);async function I(){try{let{account:e}=await (0,c.createSessionClient)();(0,s.cookies)().delete("appwrite-session"),await e.deleteSession("current")}catch(e){return null}}let N=(0,t.registerServerReference)("aadc44d3e228f191ba97dea4b94bfd3d6c422a1f",C);async function C(e){try{let a={user:{client_user_id:e.$id},client_name:`${e.firstName} ${e.lastName}`,products:["auth"],language:"en",country_codes:["US"]},r=await i.plaidClient.linkTokenCreate(a);return(0,d.parseStringify)({linkToken:r.data.link_token})}catch(e){console.log(e)}}let A=(0,t.registerServerReference)("9249bd9d6d93b168023e51461ad7e71a771f76cf",_);async function _({userId:e,bankId:a,accountId:r,accessToken:t,fundingSourceUrl:s,shareableId:i}){try{let{database:o}=await (0,c.createAdminClient)(),f=await o.createDocument(b,m,n.ID.unique(),{userId:e,bankId:a,accountId:r,accessToken:t,fundingSourceUrl:s,shareableId:i});return(0,d.parseStringify)(f)}catch(e){console.log(e)}}let j=(0,t.registerServerReference)("ef14e1f65efe4ac56ce236b9a3387533d746bfa6",P);async function P({publicToken:e,user:a}){try{let r=await i.plaidClient.itemPublicTokenExchange({public_token:e}),t=r.data.access_token,n=r.data.item_id,c=(await i.plaidClient.accountsGet({access_token:t})).data.accounts[0],s={access_token:t,account_id:c.account_id,processor:"dwolla"},l=(await i.plaidClient.processorTokenCreate(s)).data.processor_token,b=await (0,f.addFundingSource)({dwollaCustomerId:a.dwollaCustomerId,processorToken:l,bankName:c.name});if(!b)throw Error;return await A({userId:a.$id,bankId:n,accountId:c.account_id,accessToken:t,fundingSourceUrl:b,shareableId:(0,d.encryptId)(c.account_id)}),(0,o.revalidatePath)("/"),(0,d.parseStringify)({publicTokenExchange:"complete"})}catch(e){console.error("An error occurred while creating exchanging token:",e)}}let $=(0,t.registerServerReference)("245fe680eac8af592acc28f21e477a0fb9b0f54a",E);async function E({userId:e}){try{let{database:a}=await (0,c.createAdminClient)(),r=await a.listDocuments(b,m,[n.Query.equal("userId",[e])]);return(0,d.parseStringify)(r.documents)}catch(e){console.log(e)}}let R=(0,t.registerServerReference)("cb01dd2af31899c61ba851a1866163ff36df11eb",k);async function k({documentId:e}){try{let{database:a}=await (0,c.createAdminClient)(),r=await a.listDocuments(b,m,[n.Query.equal("$id",[e])]);return(0,d.parseStringify)(r.documents[0])}catch(e){console.log(e)}}let T=(0,t.registerServerReference)("82bc44f606e186ac06e9c9fc59441505db243f16",D);async function D({accountId:e}){try{let{database:a}=await (0,c.createAdminClient)(),r=await a.listDocuments(b,m,[n.Query.equal("accountId",[e])]);if(1!==r.total)return null;return(0,d.parseStringify)(r.documents[0])}catch(e){console.log(e)}}(0,l.ensureServerEntryExports)([g,h,x,w,S,N,A,j,$,R,T]),(0,t.registerServerReference)("481de2e958a1f0989fb9a82942f3922dcbad956f",g),(0,t.registerServerReference)("8568a67795cefec8dcbfbf376c0ccba5263386d4",h),(0,t.registerServerReference)("0308aa41fc4e5d2a58369d21142f3b63ff993d17",x),(0,t.registerServerReference)("98985eb42435b1e5c06bf49c590eeeae05205eb4",w),(0,t.registerServerReference)("13c00a0b1477620cd0b600fb678f92c79e38df72",S),(0,t.registerServerReference)("1133cc6f7634c12d927f0cea48eaffb138702c8f",N),(0,t.registerServerReference)("306716ad50dd0118becbceab3218a05e2af24f14",A),(0,t.registerServerReference)("6fb863147636cb4841113352dfcd6fa784497070",j),(0,t.registerServerReference)("82deb28abdff72f88801084f9a392ccdffc8cd69",$),(0,t.registerServerReference)("d26287b35055b111e84fe0f7485a71fbaf215d83",R),(0,t.registerServerReference)("b461f71c8b09816409fe99c5b1181e7f53a0c0c3",T)},59422:(e,a,r)=>{"use strict";r.d(a,{createAdminClient:()=>d,createSessionClient:()=>s});var t=r(27763);r(15740);var n=r(68341),c=r(20730);async function s(){let e=new n.Client().setEndpoint("https://cloud.appwrite.io/v1").setProject("66616ce4003e062fd858"),a=(0,c.cookies)().get("appwrite-session");if(!a||!a.value)throw Error("No session");return e.setSession(a.value),{get account(){return new n.Account(e)}}}async function d(){let e=new n.Client().setEndpoint("https://cloud.appwrite.io/v1").setProject("66616ce4003e062fd858").setKey(process.env.NEXT_APPWRITE_KEY);return{get account(){return new n.Account(e)},get database(){return new n.Databases(e)},get user(){return new n.Users(e)}}}(0,r(35203).ensureServerEntryExports)([s,d]),(0,t.registerServerReference)("fcfa5d3ca9e740cec995e523038c073b37bef697",s),(0,t.registerServerReference)("60d0f0a40c9caf7594432b9054d35baf3d34f43b",d)},16905:(e,a,r)=>{"use strict";r.d(a,{plaidClient:()=>c});var t=r(78094);let n=new t.Configuration({basePath:t.PlaidEnvironments.sandbox,baseOptions:{headers:{"PLAID-CLIENT-ID":process.env.PLAID_CLIENT_ID,"PLAID-SECRET":process.env.PLAID_SECRET}}}),c=new t.PlaidApi(n)},5308:(e,a,r)=>{"use strict";r.d(a,{encryptId:()=>c,extractCustomerIdFromUrl:()=>n,parseStringify:()=>t});let t=e=>JSON.parse(JSON.stringify(e));function n(e){let a=e.split("/");return a[a.length-1]}function c(e){return btoa(e)}}};
//# sourceMappingURL=737.js.map